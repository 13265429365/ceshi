import{c as y}from"./index-DuBF_jBm.js";import{w as d,h as p}from"./account-CXZNAavx.js";import{reactive as f,toRefs as l}from"vue";import{b as P}from"./order-BjFUygQp.js";import{N as c}from"../server-entry.js";import{copyToClipboard as h}from"quasar";import I from"qrcode-svg-ts";import{useRouter as b}from"vue-router";import{useI18n as v}from"vue-i18n/dist/vue-i18n.runtime.node.mjs";const F=()=>{const o=b(),a=v(),e=f({mode:o.currentRoute.value.query.mode?Number(o.currentRoute.value.query.mode):P,assetsId:o.currentRoute.value.query.assetsId?Number(o.currentRoute.value.query.assetsId):0,paymentList:[],currentPayment:{},createParams:{voucher:""},currentQrcode:""}),m=()=>{d({mode:e.mode}).then(t=>{if(e.paymentList=t,e.assetsId>0)for(let r=0;r<e.paymentList.length;r++)e.paymentList[r].assetsId==e.assetsId&&s(e.paymentList[r]);else e.currentPayment=e.paymentList[0];n()})},u=()=>{e.createParams.PaymentId=e.currentPayment.id,e.createParams.money=Number(e.createParams.money),y(e.createParams).then(()=>{c("positive",a.t("success")),o.back()})},s=t=>{e.currentPayment=t,n()},n=()=>{if(e.currentPayment.type==p){console.log(e.currentPayment);for(let t=0;t<e.currentPayment.data.length;t++)if(e.currentPayment.data[t].field=="Number"){const r=new I({content:e.currentPayment.data[t].value,width:138,height:138,color:"#000000",background:"#ffffff",ecl:"M"});e.currentQrcode=r.toDataURL()}}},i=t=>{h(t).then(()=>{c("positive",a.t("success"))})};return{...l(e),walletsPaymentListFunc:m,createDepositFunc:u,switchPayment:s,copyFunc:i}};export{F as d};
