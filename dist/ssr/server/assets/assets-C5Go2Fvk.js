import{reactive as f,toRefs as y,markRaw as r}from"vue";import{u as C,a as x}from"./assets-DxW8phUF.js";import*as o from"echarts";import{useI18n as g}from"vue-i18n/dist/vue-i18n.runtime.node.mjs";import{useRoute as w}from"vue-router";const M=2,F=12,a=["#3F82FE","#14C9C9","#F7BA1E"],n="pie",u="line",i={tooltip:{trigger:"item"},title:{text:"",subtext:"",left:"center",top:"35%",textStyle:{color:"#4E5969",fontSize:"12px",textDecoration:"underline"},subtextStyle:{color:"#1D2129",fontStyle:"bold",fontSize:"12px"},padding:[10,10],itemGap:8},series:{type:"pie",radius:["55%","90%"],label:{show:!1},data:[]}},t={tooltip:{trigger:"axis"},legend:{data:[],top:"0"},grid:{left:"0",right:"0",bottom:"36px",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value"},series:[]},S=()=>{const l=g(),d=w(),e=f({userAssetsList:{assetsList:[{userAssets:{}}],echarts:{},sumAmount:0,sumMoney:0},showMoney:!0,pieChart:null,lineChart:null,userAssetsInfo:{userAssets:{symbol:""}}}),c=async()=>{await C().then(s=>{e.userAssetsList=s,e.userAssetsList.assetsList.length>0&&(e.userAssetsList.assetsList.forEach((E,A)=>{const L=Math.floor(Math.random()*16777215).toString(16);a[A]="#"+L}),setTimeout(()=>{h()},200))})},p=()=>{x({id:Number(d.query.id)}).then(s=>{e.userAssetsInfo=s})},h=()=>{e.pieChart=r(o.init(document.getElementById(n))),window.addEventListener("resize",()=>{e.pieChart.resize()}),i.title.text=l.t("totalAssets"),i.title.subtext=e.userAssetsList.sumMoney.toFixed(2)+"",i.series.data=[],e.userAssetsList.assetsList.forEach(s=>{i.series.data.push({name:s.name,value:s.userAssets.money})}),e.pieChart.setOption(i),e.lineChart=r(o.init(document.getElementById(u))),window.addEventListener("resize",()=>{e.lineChart.resize()}),t.series=e.userAssetsList.echarts.series,t.xAxis.data=e.userAssetsList.echarts.category,t.legend.data=[],e.userAssetsList.assetsList.forEach(s=>{t.legend.data.push(s.name)}),e.lineChart.setOption(t),t.title=""},m=()=>{e.pieChart&&(e.pieChart.dispose(),window.removeEventListener("resize",()=>{e.pieChart.resize()})),e.lineChart&&(e.lineChart.dispose(),window.removeEventListener("resize",()=>{e.lineChart.resize()}))};return{echartsPieId:n,echartsLineId:u,colorList:a,...y(e),userAssetsListFunc:c,delCharts:m,userAssetsDetailsFunc:p}};export{M as a,F as b,S as u};
