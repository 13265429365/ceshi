import{ref as y,reactive as b,toRefs as v}from"vue";import{b as a,i as I,N as u}from"../server-entry.js";import{useRouter as R}from"vue-router";import{useI18n as F}from"vue-i18n/dist/vue-i18n.runtime.node.mjs";const M=t=>a.post("/auth/wallets/account/index",t,{showLoading:!0}),q=t=>a.post("/auth/wallets/account/info",t,{showLoading:!0}),x=t=>a.post("/auth/wallets/account/create",t,{showLoading:!0}),N=t=>a.post("/auth/wallets/account/update",t,{showLoading:!0}),C=t=>a.post("/auth/wallets/account/delete",t,{showLoading:!0}),D=t=>a.post("/auth/wallets/account/payment",t,{showLoading:!0}),r=1,h=2,i=11,T=12,S=1,W=11,j=new Map([[S,{background:"linear-gradient(90deg, #4CB8C4 0%, #3CD3AD 100%)",height:"145px",borderRadius:"8px"}],[W,{background:"linear-gradient(90deg, #7474BF 0%, #348AC7 100%)",height:"145px",borderRadius:"8px"}]]),z=()=>{const t=I(),n=R(),c=F(),w=y(null),o=y(null),e=b({mode:n.currentRoute.value.query.mode?Number(n.currentRoute.value.query.mode):r,accountList:[],currentAccountInfo:{},deleteParams:{},id:n.currentRoute.value.query.id?Number(n.currentRoute.value.query.id):0,paymentMode:n.currentRoute.value.query.mode?Number(n.currentRoute.value.query.mode):i,paymentList:[],currentPayment:{},createParams:{}}),d=async()=>{await M({mode:e.mode}).then(s=>{e.accountList=s})},l=()=>{e.deleteParams.id=Number(e.currentAccountInfo.id),C(e.deleteParams).then(async()=>{u("positive",c.t("success")),o.value?.hideFunc(),await d()})},g=()=>{t.setting.wallets.showAccountSecurityKey?o.value?.openFunc():l()},A=()=>{D({mode:e.paymentMode}).then(s=>{e.paymentList=s,e.id?q({id:e.id}).then(p=>{e.createParams=p,e.currentPayment=e.paymentList.find(L=>L.id==p.paymentId)}):e.currentPayment=e.paymentList[0]})},P=()=>{e.createParams.paymentId=e.currentPayment.id,e.id?(console.log(222),t.setting.wallets.showAccountSecurityKey?o.value?.openFunc():m()):(f(),console.log(123))},f=()=>{x(e.createParams).then(()=>{u("positive",c.t("success")),n.replace({name:"WalletsAccountIndex",query:{mode:e.paymentMode==i?r:h}})})},m=()=>{N(e.createParams).then(()=>{u("positive",c.t("success")),n.replace({name:"WalletsAccountIndex",query:{mode:e.paymentMode==i?r:h}})})};return{deleteDialogRef:w,securityDialogRef:o,...v(e),accountListFunc:d,deleteAccountFunc:g,submitDeleteFunc:l,walletsPaymentListFunc:A,submitFunc:P,updateAccountFunc:m}};export{z as a,T as b,h as c,i as d,r as e,j as f,S as g,W as h,D as w};
