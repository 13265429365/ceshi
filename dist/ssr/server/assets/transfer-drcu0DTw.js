import{b as m,u as P,i as T,N as c}from"../server-entry.js";import{w as L}from"./assets-DxW8phUF.js";import{u as Y}from"./info-ChQOlZzO.js";import{ref as u,reactive as b,toRefs as v}from"vue";import{date as f}from"quasar";import{useRoute as S,useRouter as M}from"vue-router";import{useI18n as R}from"vue-i18n/dist/vue-i18n.runtime.node.mjs";const $=e=>m.post("/auth/wallets/transfer/create",e,{showLoading:!0}),W=e=>m.post("/auth/wallets/transfer/index",e,{showLoading:!0}),F=1,N=11,j=()=>{const e=S(),p=M(),r=R(),a=P(),l=T(),n=new Date,d=new Date(n.getTime()-7*24*60*60*1e3),y=f.formatDate(n,"YYYY/MM/DD"),I=f.formatDate(d,"YYYY/MM/DD"),g=u(null),o=u(null),s=b({params:{createdAt:{from:I,to:y},type:Number(e.query.assetsId)>0?N:F,pagination:{descending:!0,page:1,rowsPerPage:10,sortBy:"createdAt"}},transferParams:{assetsId:0,money:""},assetsList:[],assetsInfo:{id:0,name:"",icon:"",userAssets:{money:0}}}),h=()=>{const t={id:0,name:r.t("balance"),icon:"",userAssets:{money:a.userInfo.money}};s.assetsList.unshift(t),s.assetsInfo=t,L().then(A=>{A.forEach(D=>{s.assetsList.push(D)})})},w=()=>{if(!s.transferParams.money){c("negative",r.t("enterMoney"));return}l.setting.wallets.showTransferSecurityKey?o.value?.openFunc():i()},i=()=>{$(s.transferParams).then(()=>{Y().then(t=>{a.updateUserInfo(t)}),c("positive",r.t("success")),p.push({name:"WalletsTransferRecord",query:{assetsId:s.transferParams.assetsId}})})};return{securityDialogRef:o,pagination:g,...v(s),walletsAssetsListFunc:h,submitFunc:w,createTransferFunc:i}};export{N as a,F as b,W as c,j as t};
