import{defineComponent as E,watch as G,onMounted as H,resolveComponent as u,withCtx as o,createVNode as t,createTextVNode as R,toDisplayString as D,useSSRContext as J}from"vue";import{u as K}from"./info-D5Z-xS4G.js";import{u as Q}from"./uploader-BrQC4wam.js";import{u as W,i as X,a as Z,_ as $}from"../server-entry.js";import{useRouter as ee}from"vue-router";import{date as ne}from"quasar";import{useI18n as te}from"vue-i18n/dist/vue-i18n.runtime.node.mjs";import{ssrRenderAttrs as oe,ssrRenderComponent as a,ssrInterpolate as q}from"vue/server-renderer";import"./info-ChQOlZzO.js";import"compressorjs";import"pinia";import"axios";import"quasar/wrappers";const O=E({name:"UserSetting",__name:"info",emits:["update"],setup(i,{expose:l,emit:s}){l();const h=W(),w=X(),e=ee(),{userInfoParams:d,currentCountry:S,genderList:M,updateUserInfoFunc:U}=K();G(h.userInfo,g=>{d.value=g}),H(()=>{r()});const r=()=>{if(d.value=h.userInfo,d.value.birthday=ne.formatDate(d.value.birthday,"YYYY/MM/DD"),d.value.telephone=="")S.value=w.countryList[0];else if(d.value.telephone.indexOf("|")>-1){const g=d.value.telephone.split("|")[0],N=w.countryList.findIndex(Y=>Y.code==g);S.value=w.countryList[N],d.value.telephone=d.value.telephone.split("|")[1]}},C=()=>{d.value.telephone!=""&&(d.value.telephone=S.value.code+"|"+d.value.telephone),U(e.back())},p=te(),k=s;k("update",{title:p.t("userSettings"),right:{callback:()=>{},icon:""}});const V={$userStore:h,$initStore:w,$router:e,userInfoParams:d,currentCountry:S,genderList:M,updateUserInfoFunc:U,initData:r,submitUpdateUserInfoFunc:C,$i18n:p,emit:k,uploader:Q,get imageSrc(){return Z}};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}});function ae(i,l,s,h,w,e,d,S){const M=u("q-uploader-add-trigger"),U=u("q-avatar"),r=u("q-img"),C=u("q-badge"),p=u("q-input"),k=u("q-icon"),V=u("q-popup-proxy"),g=u("q-date"),N=u("q-select"),Y=u("q-item"),P=u("q-item-section"),j=u("q-item-label"),B=u("q-btn");l(`<div${oe(h)}><div class="row justify-center q-py-lg"><div class="relative-position">`),l(a(e.uploader,{onUploaded:n=>{e.userInfoParams.avatar=n}},{default:o((n,m,b,v)=>{if(m)m(a(M,null,null,b,v)),m(a(U,{size:"80px"},{default:o((z,f,_,y)=>{if(f)f(a(r,{"no-spinner":"",src:e.imageSrc(e.userInfoParams.avatar??"")},null,_,y)),f(a(C,{floating:"",class:"bg-transparent",style:{top:"70%"}},{default:o((L,c,I,x)=>{if(c)c(a(r,{"no-spinner":"",src:"/src/assets/default/edit.png",width:"28px",height:"28px"},null,I,x));else return[t(r,{"no-spinner":"",src:"/src/assets/default/edit.png",width:"28px",height:"28px"})]}),_:1},_,y));else return[t(r,{"no-spinner":"",src:e.imageSrc(e.userInfoParams.avatar??"")},null,8,["src"]),t(C,{floating:"",class:"bg-transparent",style:{top:"70%"}},{default:o(()=>[t(r,{"no-spinner":"",src:"/src/assets/default/edit.png",width:"28px",height:"28px"})]),_:1})]}),_:1},b,v));else return[t(M),t(U,{size:"80px"},{default:o(()=>[t(r,{"no-spinner":"",src:e.imageSrc(e.userInfoParams.avatar??"")},null,8,["src"]),t(C,{floating:"",class:"bg-transparent",style:{top:"70%"}},{default:o(()=>[t(r,{"no-spinner":"",src:"/src/assets/default/edit.png",width:"28px",height:"28px"})]),_:1})]),_:1})]}),_:1},s)),l(`</div></div><div class="q-mt-lg q-px-lg"><div class="q-mb-md"><div class="text-weight-bold q-mb-sm">${q(i.$t("nickname"))}</div>`),l(a(p,{placeholder:i.$t("nickname"),outlined:"",modelValue:e.userInfoParams.nickName,"onUpdate:modelValue":n=>e.userInfoParams.nickName=n},null,s)),l(`</div><div class="q-mb-md"><div class="text-weight-bold q-mb-sm">${q(i.$t("email"))}</div>`),l(a(p,{placeholder:i.$t("email"),outlined:"",modelValue:e.userInfoParams.email,"onUpdate:modelValue":n=>e.userInfoParams.email=n},null,s)),l(`</div><div class="q-mb-md"><div class="text-weight-bold q-mb-sm">${q(i.$t("birthday"))}</div>`),l(a(p,{placeholder:i.$t("birthday"),outlined:"",modelValue:e.userInfoParams.birthday,"onUpdate:modelValue":n=>e.userInfoParams.birthday=n,mask:"date"},{append:o((n,m,b,v)=>{if(m)m(a(k,{name:"event",class:"cursor-pointer"},{default:o((z,f,_,y)=>{if(f)f(a(V,null,{default:o((L,c,I,x)=>{if(c)c(a(g,{modelValue:e.userInfoParams.birthday,"onUpdate:modelValue":F=>e.userInfoParams.birthday=F},null,I,x));else return[t(g,{modelValue:e.userInfoParams.birthday,"onUpdate:modelValue":F=>e.userInfoParams.birthday=F},null,8,["modelValue","onUpdate:modelValue"])]}),_:1},_,y));else return[t(V,null,{default:o(()=>[t(g,{modelValue:e.userInfoParams.birthday,"onUpdate:modelValue":L=>e.userInfoParams.birthday=L},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]}),_:1},b,v));else return[t(k,{name:"event",class:"cursor-pointer"},{default:o(()=>[t(V,null,{default:o(()=>[t(g,{modelValue:e.userInfoParams.birthday,"onUpdate:modelValue":z=>e.userInfoParams.birthday=z},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]}),_:1},s)),l(`</div><div class="q-mb-md"><div class="text-weight-bold q-mb-sm">${q(i.$t("sex"))}</div>`),l(a(N,{outlined:"",modelValue:e.userInfoParams.sex,"onUpdate:modelValue":n=>e.userInfoParams.sex=n,"map-options":"",options:e.genderList,"option-value":"value","option-label":"name","emit-value":"","dropdown-icon":"expand_more"},null,s)),l(`</div><div class="q-mb-md"><div class="text-weight-bold q-mb-sm">${q(i.$t("telephone"))}</div><div class="row q-col-gutter-sm">`),l(a(N,{outlined:"",modelValue:e.currentCountry,"onUpdate:modelValue":n=>e.currentCountry=n,options:e.$initStore.countryList,class:"col-4"},{selected:o((n,m,b,v)=>{if(m)m(`<div class="row no-wrap items-center"${v}>`),m(a(r,{width:"20px",height:"15px",src:e.imageSrc(e.currentCountry.icon),"no-spinner":"",alt:"",class:"q-mr-xs"},null,b,v)),m(` +${q(e.currentCountry.code)}</div>`);else return[t("div",{class:"row no-wrap items-center"},[t(r,{width:"20px",height:"15px",src:e.imageSrc(e.currentCountry.icon),"no-spinner":"",alt:"",class:"q-mr-xs"},null,8,["src"]),R(" +"+D(e.currentCountry.code),1)])]}),option:o((n,m,b,v)=>{if(m)m(a(Y,n.itemProps,{default:o((z,f,_,y)=>{if(f)f(a(P,{avatar:""},{default:o((L,c,I,x)=>{if(c)c(a(r,{src:e.imageSrc(n.opt.icon),"no-spinner":"",alt:""},null,I,x));else return[t(r,{src:e.imageSrc(n.opt.icon),"no-spinner":"",alt:""},null,8,["src"])]}),_:2},_,y)),f(a(P,null,{default:o((L,c,I,x)=>{if(c)c(a(j,null,{default:o((F,A,le,re)=>{if(A)A(`${q(n.opt.name)}`);else return[R(D(n.opt.name),1)]}),_:2},I,x));else return[t(j,null,{default:o(()=>[R(D(n.opt.name),1)]),_:2},1024)]}),_:2},_,y));else return[t(P,{avatar:""},{default:o(()=>[t(r,{src:e.imageSrc(n.opt.icon),"no-spinner":"",alt:""},null,8,["src"])]),_:2},1024),t(P,null,{default:o(()=>[t(j,null,{default:o(()=>[R(D(n.opt.name),1)]),_:2},1024)]),_:2},1024)]}),_:2},b,v));else return[t(Y,n.itemProps,{default:o(()=>[t(P,{avatar:""},{default:o(()=>[t(r,{src:e.imageSrc(n.opt.icon),"no-spinner":"",alt:""},null,8,["src"])]),_:2},1024),t(P,null,{default:o(()=>[t(j,null,{default:o(()=>[R(D(n.opt.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]}),_:1},s)),l(a(p,{class:"col-8",placeholder:i.$t("telephone"),outlined:"",modelValue:e.userInfoParams.telephone,"onUpdate:modelValue":n=>e.userInfoParams.telephone=n,modelModifiers:{number:!0}},null,s)),l(`</div></div><div class="q-mb-md"><div class="text-weight-bold q-mb-sm">${q(i.$t("desc"))}</div>`),l(a(p,{type:"textarea",placeholder:i.$t("desc"),outlined:"",modelValue:e.userInfoParams.desc,"onUpdate:modelValue":n=>e.userInfoParams.desc=n},null,s)),l("</div>"),l(a(B,{onClick:e.submitUpdateUserInfoFunc,size:"lg",class:"full-width q-mb-xl row justify-center",unelevated:"",rounded:"","no-caps":"",color:"primary",label:i.$t("submit")},null,s)),l("</div></div>")}const T=O.setup;O.setup=(i,l)=>{const s=J();return(s.modules||(s.modules=new Set)).add("src/pages/default/mobile/users/setting/info.vue"),T?T(i,l):void 0};const ye=$(O,[["ssrRender",ae],["__file","info.vue"]]);export{ye as default};
