import{c as K,a1 as U,bz as W,g as G,a2 as H,a as i,r as _,w as M,bA as D,bB as J,ai as R,h,O as X,N as Y,n as Z,_ as ee,s as w,t as ae,u as L,v as te,b3 as ne,B as le,y as ie}from"./index-BGPSJsC7.js";import{b as ue}from"./format-DyQxkAtJ.js";import{Q as oe}from"./QList-vmimMWGQ.js";import{n as re}from"./noData-BLzTUGQw.js";function k(e,s){return[!0,!1].includes(e)?e:s}const se=K({name:"QPagination",props:{...U,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||W.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:s}){const{proxy:d}=G(),{$q:u}=d,m=H(e,u),n=i(()=>parseInt(e.min,10)),l=i(()=>parseInt(e.max,10)),b=i(()=>parseInt(e.maxPages,10)),f=i(()=>g.value+" / "+l.value),v=i(()=>k(e.boundaryLinks,e.input)),y=i(()=>k(e.boundaryNumbers,!e.input)),O=i(()=>k(e.directionLinks,e.input)),V=i(()=>k(e.ellipses,!e.input)),B=_(null),g=i({get:()=>e.modelValue,set:a=>{if(a=parseInt(a,10),e.disable||isNaN(a))return;const t=ue(a,n.value,l.value);e.modelValue!==t&&s("update:modelValue",t)}});M(()=>`${n.value}|${l.value}`,()=>{g.value=e.modelValue});const E=i(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),C=i(()=>e.gutter in D?`${D[e.gutter]}px`:e.gutter||null),j=i(()=>C.value!==null?`--q-pagination-gutter-parent:-${C.value};--q-pagination-gutter-child:${C.value}`:null),p=i(()=>{const a=[e.iconFirst||u.iconSet.pagination.first,e.iconPrev||u.iconSet.pagination.prev,e.iconNext||u.iconSet.pagination.next,e.iconLast||u.iconSet.pagination.last];return u.lang.rtl===!0?a.reverse():a}),A=i(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),q=i(()=>J(e,"flat")),I=i(()=>({[q.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),T=i(()=>{const a={[q.value]:!1};return e.activeDesign!==""&&(a[e.activeDesign]=!0),a}),$=i(()=>({...T.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),S=i(()=>{let a=Math.max(b.value,1+(V.value?2:0)+(y.value?2:0));const t={pgFrom:n.value,pgTo:l.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(l.value).length)}em`}};return b.value&&a<l.value-n.value+1&&(a=1+Math.floor(a/2)*2,t.pgFrom=Math.max(n.value,Math.min(l.value-a+1,e.modelValue-Math.floor(a/2))),t.pgTo=Math.min(l.value,t.pgFrom+a-1),y.value&&(t.boundaryStart=!0,t.pgFrom++),V.value&&t.pgFrom>n.value+(y.value?1:0)&&(t.ellipsesStart=!0,t.pgFrom++),y.value&&(t.boundaryEnd=!0,t.pgTo--),V.value&&t.pgTo<l.value-(y.value?1:0)&&(t.ellipsesEnd=!0,t.pgTo--)),t});function F(a){g.value=a}function Q(a){g.value=g.value+a}const z=i(()=>{function a(){g.value=B.value,B.value=null}return{"onUpdate:modelValue":t=>{B.value=t},onKeyup:t=>{R(t,13)===!0&&a()},onBlur:a}});function r(a,t,P){const c={"aria-label":t,"aria-current":"false",...I.value,...a};return P===!0&&Object.assign(c,{"aria-current":"true",...$.value}),t!==void 0&&(e.toFn!==void 0?c.to=e.toFn(t):c.onClick=()=>{F(t)}),h(Y,c)}return Object.assign(d,{set:F,setByOffset:Q}),()=>{const a=[],t=[];let P;if(v.value===!0&&(a.push(r({key:"bls",disable:e.disable||e.modelValue<=n.value,icon:p.value[0]},n.value)),t.unshift(r({key:"ble",disable:e.disable||e.modelValue>=l.value,icon:p.value[3]},l.value))),O.value===!0&&(a.push(r({key:"bdp",disable:e.disable||e.modelValue<=n.value,icon:p.value[1]},e.modelValue-1)),t.unshift(r({key:"bdn",disable:e.disable||e.modelValue>=l.value,icon:p.value[2]},e.modelValue+1))),e.input!==!0){P=[];const{pgFrom:c,pgTo:N,marginalStyle:x}=S.value;if(S.value.boundaryStart===!0){const o=n.value===e.modelValue;a.push(r({key:"bns",style:x,disable:e.disable,label:n.value},n.value,o))}if(S.value.boundaryEnd===!0){const o=l.value===e.modelValue;t.unshift(r({key:"bne",style:x,disable:e.disable,label:l.value},l.value,o))}S.value.ellipsesStart===!0&&a.push(r({key:"bes",style:x,disable:e.disable,label:"…",ripple:!1},c-1)),S.value.ellipsesEnd===!0&&t.unshift(r({key:"bee",style:x,disable:e.disable,label:"…",ripple:!1},N+1));for(let o=c;o<=N;o++)P.push(r({key:`bpg${o}`,style:x,disable:e.disable,label:o},o,o===e.modelValue))}return h("div",{class:E.value,...A.value},[h("div",{class:"q-pagination__content row no-wrap items-center",style:j.value},[...a,e.input===!0?h(X,{class:"inline",style:{width:`${f.value.length/1.5}em`},type:"number",dense:!0,value:B.value,disable:e.disable,dark:m.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:f.value,min:n.value,max:l.value,...z.value}):h("div",{class:"q-pagination__middle row justify-center"},P),...t])])}}}),de=Z({name:"paginationIndex",__name:"pagination",props:{request:{required:!0,type:Function,default:()=>()=>{}},params:{required:!0,default:()=>({pagination:{descending:!0,page:1,rowsPerPage:10,sortBy:"createdAt"}})}},setup(e,{expose:s}){const d=e,u=_(!1),m=_([]),n=_({pagination:{descending:!0,page:1,rowsPerPage:10,sortBy:"createdAt"}});M(d.params,v=>{n.value=v});const l=()=>{n.value=d.params,b()},b=async()=>{if(n.value.hasOwnProperty("createdAt")&&!n.value.createdAt)return!1;d.request(n.value).then(v=>{u.value=Math.ceil(v.count/n.value.pagination.rowsPerPage),m.value=v.items})};s({initData:l});const f={props:d,total:u,itemList:m,dataParams:n,initData:l,loadMore:b,noData:re};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),ce={class:"row justify-center q-mt-md"};function ve(e,s,d,u,m,n){return w(),ae("div",null,[u.itemList.length>0?(w(),L(oe,{key:0,bordered:"",class:"rounded-borders q-pa-md q-mt-lg"},{default:te(()=>[ne(e.$slots,"default",{itemList:u.itemList}),le("div",ce,[ie(se,{modelValue:u.dataParams.pagination.page,"onUpdate:modelValue":[s[0]||(s[0]=l=>u.dataParams.pagination.page=l),u.loadMore],max:u.total,min:1,input:""},null,8,["modelValue","max"])])]),_:3})):(w(),L(u.noData,{key:1}))])}const ye=ee(de,[["render",ve],["__file","pagination.vue"]]);export{ye as p};
