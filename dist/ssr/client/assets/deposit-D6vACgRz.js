import{c as y}from"./index-bgOLeZpZ.js";import{w as d,h as p}from"./account-hQxYRMn-.js";import{b as f}from"./order-s6Q6N0oh.js";import{J as l,aJ as P,k as b,b1 as h,b2 as c}from"./index-BGPSJsC7.js";import{c as I}from"./copy-to-clipboard-BYNBMLAc.js";import{Q as v}from"./index.min-DAI2r0rk.js";const Q=()=>{const a=l(),s=P(),e=b({mode:a.currentRoute.value.query.mode?Number(a.currentRoute.value.query.mode):f,assetsId:a.currentRoute.value.query.assetsId?Number(a.currentRoute.value.query.assetsId):0,paymentList:[],currentPayment:{},createParams:{voucher:""},currentQrcode:""}),m=()=>{d({mode:e.mode}).then(t=>{if(e.paymentList=t,e.assetsId>0)for(let r=0;r<e.paymentList.length;r++)e.paymentList[r].assetsId==e.assetsId&&o(e.paymentList[r]);else e.currentPayment=e.paymentList[0];n()})},u=()=>{e.createParams.PaymentId=e.currentPayment.id,e.createParams.money=Number(e.createParams.money),y(e.createParams).then(()=>{c("positive",s.t("success")),a.back()})},o=t=>{e.currentPayment=t,n()},n=()=>{if(e.currentPayment.type==p){console.log(e.currentPayment);for(let t=0;t<e.currentPayment.data.length;t++)if(e.currentPayment.data[t].field=="Number"){const r=new v({content:e.currentPayment.data[t].value,width:138,height:138,color:"#000000",background:"#ffffff",ecl:"M"});e.currentQrcode=r.toDataURL()}}},i=t=>{I(t).then(()=>{c("positive",s.t("success"))})};return{...h(e),walletsPaymentListFunc:m,createDepositFunc:u,switchPayment:o,copyFunc:i}};export{Q as d};
