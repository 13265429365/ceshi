import{aF as n,aJ as F,J as S,z as Y,I as C,r as m,k as b,b1 as M,b2 as f}from"./index-BGPSJsC7.js";import{d as I}from"./date-DIhP-R8E.js";import{w as T}from"./assets-DBqU0KNT.js";import{u as R}from"./info-B9Xb6Fua.js";const $=e=>n.post("/auth/wallets/convert/create",e,{showLoading:!0}),B=e=>n.post("/auth/wallets/convert/index",e,{showLoading:!0}),x=e=>n.post("/auth/wallets/convert/info",e,{showLoading:!0}),E=()=>{const e=F(),d=S(),v=Y(),a=C(),r=new Date,A=new Date(r.getTime()-7*24*60*60*1e3),l=I.formatDate(r,"YYYY/MM/DD"),p=I.formatDate(A,"YYYY/MM/DD"),c="from",P="to",i=m(null),w=m(null),s=b({params:{createdAt:{from:p,to:l},pagination:{descending:!0,page:1,rowsPerPage:10,sortBy:"createdAt"}},convertParams:{assetsId:0,toAssetsId:1},assetsList:[],assetsInfo:{id:0,name:"",icon:"",userAssets:{money:0}},toAssetsInfo:{id:0,name:"",icon:"",userAssets:{money:0}},showPreview:!1,showAssetsPopup:!1,AssetsType:"",rate:""}),h=()=>{s.assetsList.push({id:0,name:e.t("balance"),icon:"",userAssets:{money:a.userInfo.money}}),T().then(t=>{s.assetsInfo=s.assetsList[0],s.toAssetsInfo=t[0],s.convertParams.toAssetsId=s.toAssetsInfo.id,t.forEach(o=>{s.assetsList.push(o)})})},y=(t,o)=>{if(s.showAssetsPopup=!1,t==c){s.assetsInfo=o,s.convertParams.assetsId=s.assetsInfo.id;return}s.toAssetsInfo=o,s.convertParams.toAssetsId=s.toAssetsInfo.id},g=()=>{if(!s.convertParams.money){f("negative",e.t("enterMoney"));return}x({assetsId:s.convertParams.assetsId,ToAssetsId:s.convertParams.toAssetsId}).then(t=>{s.showPreview=!0,s.rate=t.rate})},D=()=>{v.setting.wallets.showConvertSecurityKey?i.value?.openFunc():u()},u=()=>{s.convertParams.money=Number(s.convertParams.money),$(s.convertParams).then(()=>{R().then(t=>{a.updateUserInfo(t)}),f("positive",e.t("success")),d.push({name:"WalletsConvertRecord"})})},L=()=>{const t={...s.assetsInfo},o={...s.toAssetsInfo};s.assetsInfo=o,s.toAssetsInfo=t,s.convertParams.assetsId=s.assetsInfo.id,s.convertParams.toAssetsId=s.toAssetsInfo.id,s.convertParams.money=""};return{securityDialogRef:i,pagination:w,ConvertSideFrom:c,ConvertSideTo:P,...M(s),walletsAssetsListFunc:h,switchAssetsFunc:y,convertInfoFunc:g,submitFunc:D,createConvertFunc:u,invertFunc:L}};export{B as a,E as c};
